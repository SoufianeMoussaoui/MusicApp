@model AdminDashboardViewModel
@{
    ViewBag.Title = "Admin Dashboard - MusicFlow";
    ViewBag.IsAuthenticated = true;
}

<style>
    .gradient-bg {
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    }

    .admin-card {
        background: rgba(30, 41, 59, 0.5);
        border: 1px solid rgba(168, 85, 247, 0.1);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .admin-card:hover {
        border-color: rgba(168, 85, 247, 0.3);
        transform: translateY(-4px);
    }

    .stat-number {
        font-size: 2.5rem;
        font-weight: bold;
        background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .admin-table {
        background: rgba(15, 23, 42, 0.3);
        border: 1px solid rgba(168, 85, 247, 0.1);
        border-radius: 12px;
        overflow: hidden;
    }

    .admin-table th {
        background: rgba(30, 41, 59, 0.7);
        padding: 16px;
        text-align: left;
        font-weight: 600;
        color: #a78bfa;
        border-bottom: 1px solid rgba(168, 85, 247, 0.2);
    }

    .admin-table td {
        padding: 16px;
        border-bottom: 1px solid rgba(168, 85, 247, 0.1);
    }

    .admin-table tr:hover {
        background: rgba(168, 85, 247, 0.05);
    }

    .badge-admin {
        background: rgba(168, 85, 247, 0.2);
        color: #a78bfa;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
    }

    .badge-active {
        background: rgba(34, 197, 94, 0.2);
        color: #4ade80;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
    }

    .badge-inactive {
        background: rgba(239, 68, 68, 0.2);
        color: #f87171;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
    }

    .nav-link {
        transition: all 0.3s ease;
        padding: 12px 20px;
        border-radius: 8px;
        color: #cbd5e1;
    }

    .nav-link:hover {
        background: rgba(168, 85, 247, 0.1);
        color: #a78bfa;
    }

    .nav-link.active {
        background: rgba(168, 85, 247, 0.2);
        color: #a78bfa;
        border-left: 4px solid #a855f7;
    }
</style>

<div class="gradient-bg min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- Header -->

        <!-- Navigation -->
        <div class="flex space-x-1 mb-8 bg-slate-900/50 rounded-xl p-1">
            <a href="@Url.Action("Index", "Admin")" 
               class="nav-link @(ViewContext.RouteData.Values["action"].ToString() == "Index" ? "active" : "")">
                Dashboard
            </a>
            <a href="@Url.Action("Users", "Admin")" 
               class="nav-link @(ViewContext.RouteData.Values["action"].ToString() == "Users" ? "active" : "")">
                Users
            </a>
            <a href="@Url.Action("Songs", "Admin")" 
               class="nav-link @(ViewContext.RouteData.Values["action"].ToString() == "Songs" ? "active" : "")">
                Songs
            </a>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="admin-card p-6 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-slate-400 text-sm mb-2">Total Users</p>
                        <p class="stat-number">@Model.TotalUsers</p>
                    </div>
                    <div class="w-12 h-12 bg-purple-900/30 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="admin-card p-6 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-slate-400 text-sm mb-2">Total Songs</p>
                        <p class="stat-number">@Model.TotalSongs</p>
                    </div>
                    <div class="w-12 h-12 bg-pink-900/30 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-pink-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="admin-card p-6 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-slate-400 text-sm mb-2">Total Playlists</p>
                        <p class="stat-number">@Model.TotalPlaylists</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-900/30 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path>
                            <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="admin-card p-6 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-slate-400 text-sm mb-2">Total Downloads</p>
                        <p class="stat-number">@Model.TotalDownloads</p>
                    </div>
                    <div class="w-12 h-12 bg-green-900/30 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Users & Songs -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Recent Users -->
            <div class="admin-card p-6 rounded-2xl">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white">Recent Users</h3>
                    <a href="@Url.Action("Users", "Admin")" class="text-purple-400 hover:text-purple-300 text-sm">
                        View All
                    </a>
                </div>
                <div class="admin-table">
                    <table class="w-full">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Joined</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var user in Model.RecentUsers)
                            {
                                <tr>
                                    <td>
                                        <div class="flex items-center">
                                            <div class="w-8 h-8 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-sm mr-3">
                                                @user.Firstname?[0]@user.Lastname?[0]
                                            </div>
                                            <div>
                                                <p class="text-white font-medium">@user.Username</p>
                                                <p class="text-slate-400 text-sm">@user.Email</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-slate-400">@user.CreatedAt.ToString("MMM dd")</td>
                                    <td>
                                        @if (user.IsAdmin)
                                        {
                                            <span class="badge-admin">Admin</span>
                                        }
                                        else
                                        {
                                            <span class="@(user.IsActive ? "badge-active" : "badge-inactive")">
                                                @(user.IsActive ? "Active" : "Inactive")
                                            </span>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Recent Songs -->
            <div class="admin-card p-6 rounded-2xl">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white">Recent Songs</h3>
                    <a href="@Url.Action("Songs", "Admin")" class="text-purple-400 hover:text-purple-300 text-sm">
                        View All
                    </a>
                </div>
                <div class="admin-table">
                    <table class="w-full">
                        <thead>
                            <tr>
                                <th>Song</th>
                                <th>Uploaded</th>
                                <th>Plays</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var song in Model.RecentSongs)
                            {
                                <tr>
                                    <td>
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center mr-3">
                                                <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"></path>
                                                </svg>
                                            </div>
                                            <div>
                                                <p class="text-white font-medium">@song.Title</p>
                                                <p class="text-slate-400 text-sm">Song ID: @song.SongId</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-slate-400">@song.UploadeAt.ToString("MMM dd")</td>
                                    <td class="text-slate-400">@song.PlayCounts</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>